<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ù…Ù„ Ø³Ù†Ø³ÙˆØ± ESP32</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment-jalaali@0.9.4/build/moment-jalaali.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --light: #f8f9fa;
            --dark: #212529;
        }
        
        body {
            font-family: 'Vazir', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .card {
            border-radius: 15px;
            border: none;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        .header-card {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
        }
        
        .temp-card {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa8a8 100%);
            color: white;
        }
        
        .hum-card {
            background: linear-gradient(135deg, #4d96ff 0%, #6bc5ff 100%);
            color: white;
        }
        
        .avg-card {
            background: linear-gradient(135deg, #38b000 0%, #70e000 100%);
            color: white;
        }
        
        .status-card {
            background: linear-gradient(135deg, #7209b7 0%, #9d4edd 100%);
            color: white;
        }
        
        .sensor-value {
            font-size: 3.2rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .unit {
            font-size: 1.3rem;
            opacity: 0.9;
        }
        
        .avg-value {
            font-size: 2.5rem;
            font-weight: bold;
        }
        
        .status-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-online {
            background: #28a745;
            box-shadow: 0 0 10px #28a745;
            animation: pulse 2s infinite;
        }
        
        .status-offline {
            background: #dc3545;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .connection-status {
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .connection-online {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 2px solid #28a745;
        }
        
        .connection-offline {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            border: 2px solid #dc3545;
        }
        
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
            background: white;
            border-radius: 10px;
            padding: 15px;
        }
        
        .refresh-btn {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .refresh-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }
        
        .refresh-btn:active {
            transform: scale(0.98);
        }
        
        .last-update {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .data-table {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .table th {
            background: var(--primary);
            color: white;
            position: sticky;
            top: 0;
        }
        
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 200px;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .time-ago {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .alert-custom {
            border-radius: 10px;
            border: none;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .control-panel {
            background: rgba(0,0,0,0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .sensor-value {
                font-size: 2.5rem;
            }
            
            .chart-container {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ù‡Ø¯Ø± -->
        <div class="card header-card mb-4">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="mb-2"><i class="bi bi-graph-up-arrow"></i> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ù…Ù„ Ø³Ù†Ø³ÙˆØ± ESP32</h1>
                        <p class="mb-0">
                            <i class="bi bi-cpu"></i> Ø³Ù†Ø³ÙˆØ± AHT20 | 
                            <i class="bi bi-wifi"></i> Real-Time Data | 
                            <i class="bi bi-github"></i> GitHub Storage
                        </p>
                    </div>
                    <div class="col-md-4 text-end">
                        <button id="refreshBtn" class="refresh-btn">
                            <i class="bi bi-arrow-clockwise"></i> Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                        </button>
                        <div id="lastUpdate" class="last-update mt-2">
                            <i class="bi bi-clock"></i> Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù¾Ù†Ù„ Ú©Ù†ØªØ±Ù„ -->
        <div class="control-panel">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <div class="status-indicator" id="statusIndicator"></div>
                        <span id="connectionStatus" class="connection-status connection-offline">
                            Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...
                        </span>
                        <div class="ms-3">
                            <span id="timeAgo" class="time-ago">--</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="autoRefresh" checked>
                        <label class="form-check-label" for="autoRefresh">Auto-Refresh</label>
                    </div>
                    <div class="btn-group btn-group-sm ms-2">
                        <button class="btn btn-outline-primary" onclick="changeRefreshRate(2)">2s</button>
                        <button class="btn btn-outline-primary active" onclick="changeRefreshRate(5)">5s</button>
                        <button class="btn btn-outline-primary" onclick="changeRefreshRate(10)">10s</button>
                        <button class="btn btn-outline-primary" onclick="changeRefreshRate(30)">30s</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card temp-card">
                    <div class="card-body text-center">
                        <h5><i class="bi bi-thermometer-half"></i> Ø¯Ù…Ø§ÛŒ ÙØ¹Ù„ÛŒ</h5>
                        <div class="sensor-value" id="currentTemp">--</div>
                        <div class="unit">Ø¯Ø±Ø¬Ù‡ Ø³Ø§Ù†ØªÛŒâ€ŒÚ¯Ø±Ø§Ø¯</div>
                        <div class="mt-3">
                            <small>Ø­Ø¯Ø§Ú©Ø«Ø±: <span id="maxTemp">--</span>Â°C</small> | 
                            <small>Ø­Ø¯Ø§Ù‚Ù„: <span id="minTemp">--</span>Â°C</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card hum-card">
                    <div class="card-body text-center">
                        <h5><i class="bi bi-moisture"></i> Ø±Ø·ÙˆØ¨Øª ÙØ¹Ù„ÛŒ</h5>
                        <div class="sensor-value" id="currentHum">--</div>
                        <div class="unit">Ø¯Ø±ØµØ¯</div>
                        <div class="mt-3">
                            <small>Ø­Ø¯Ø§Ú©Ø«Ø±: <span id="maxHum">--</span>%</small> | 
                            <small>Ø­Ø¯Ø§Ù‚Ù„: <span id="minHum">--</span>%</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card avg-card">
                    <div class="card-body text-center">
                        <h5><i class="bi bi-calculator"></i> Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¯Ù…Ø§</h5>
                        <div class="avg-value" id="avgTemp">--</div>
                        <div class="unit">Ø¯Ø±Ø¬Ù‡ Ø³Ø§Ù†ØªÛŒâ€ŒÚ¯Ø±Ø§Ø¯</div>
                        <div class="mt-3">
                            <small>Ø¯Ø± Û± Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card status-card">
                    <div class="card-body text-center">
                        <h5><i class="bi bi-activity"></i> ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„</h5>
                        <div class="mt-3">
                            <div class="mb-2">
                                <h6>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</h6>
                                <div id="lastDataTime">--:--:--</div>
                            </div>
                            <div class="mb-2">
                                <h6>ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</h6>
                                <div class="stat-value" id="dataCount">0</div>
                            </div>
                            <div>
                                <h6>Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø§ØªØµØ§Ù„</h6>
                                <div id="uptime">--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù†Ù…ÙˆØ¯Ø§Ø± -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="mb-3"><i class="bi bi-graph-up"></i> Ù†Ù…ÙˆØ¯Ø§Ø± ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Û²Û´ Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡</h5>
                <div class="chart-container">
                    <canvas id="sensorChart"></canvas>
                </div>
                <div id="chartLoading" class="loading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <div class="mt-2">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø±...</div>
                </div>
            </div>
        </div>

        <!-- Ø¢Ù…Ø§Ø± Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="mb-3"><i class="bi bi-bar-chart"></i> Ø¢Ù…Ø§Ø± Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</h5>
                <div class="stats-grid">
                    <div class="stat-item bg-primary text-white">
                        <div class="stat-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø±Ø·ÙˆØ¨Øª</div>
                        <div class="stat-value" id="avgHumidity">--%</div>
                    </div>
                    <div class="stat-item bg-success text-white">
                        <div class="stat-label">Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>
                        <div class="stat-value" id="onlineTime">--</div>
                    </div>
                    <div class="stat-item bg-warning text-white">
                        <div class="stat-label">ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ù…Ø§</div>
                        <div class="stat-value" id="tempRange">--Â°C</div>
                    </div>
                    <div class="stat-item bg-info text-white">
                        <div class="stat-label">Ù†Ø±Ø® Ø¢Ù¾Ø¯ÛŒØª</div>
                        <div class="stat-value" id="updateRate">--/Ø³Ø§Ø¹Øª</div>
                    </div>
                    <div class="stat-item bg-danger text-white">
                        <div class="stat-label">ØªÙˆÙ‚Ùâ€ŒÙ‡Ø§ÛŒ Ø§ØªØµØ§Ù„</div>
                        <div class="stat-value" id="disconnectCount">0</div>
                    </div>
                    <div class="stat-item bg-secondary text-white">
                        <div class="stat-label">Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ</div>
                        <div class="stat-value" id="timeRange">--</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø¬Ø¯ÙˆÙ„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ -->
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0"><i class="bi bi-table"></i> ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</h5>
                    <div>
                        <span class="badge bg-primary me-2" id="totalRecords">0 Ø±Ú©ÙˆØ±Ø¯</span>
                        <button class="btn btn-sm btn-outline-primary" onclick="toggleDataTable()">
                            <i class="bi bi-arrows-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="data-table">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø²Ù…Ø§Ù†</th>
                                <th>Ø¯Ù…Ø§ (Â°C)</th>
                                <th>Ø±Ø·ÙˆØ¨Øª (%)</th>
                                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                <th>Ù…Ø¯Øª Ú¯Ø°Ø´ØªÙ‡</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody">
                            <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´Ù† -->
                        </tbody>
                    </table>
                </div>
                <div id="noData" class="text-center py-5" style="display: none;">
                    <i class="bi bi-database-exclamation" style="font-size: 3rem; opacity: 0.5;"></i>
                    <p class="mt-3">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                    <small>Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ù†Ø³ÙˆØ±...</small>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ============
        let sensorChart = null;
        let sensorData = [];
        let refreshRate = 5000; // 5 Ø«Ø§Ù†ÛŒÙ‡
        let refreshInterval = null;
        let lastSuccessfulFetch = null;
        let disconnectCount = 0;
        let isOnline = false;
        let chartInitialized = false;
        
        // ============ ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ============
        
        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø¯ÙˆØ± Ø²Ø¯Ù† CORS Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² proxy
        async function fetchWithCORSProxy(url) {
            const proxies = [
                `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                `https://corsproxy.io/?${encodeURIComponent(url)}`,
                `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
            ];
            
            for (let proxyUrl of proxies) {
                try {
                    const response = await fetch(proxyUrl, {
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        return await response.json();
                    }
                } catch (error) {
                    console.warn(`Proxy failed: ${proxyUrl}`, error);
                    continue;
                }
            }
            
            throw new Error('ØªÙ…Ø§Ù… proxyÙ‡Ø§ Ø¨Ø§ Ø´Ú©Ø³Øª Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯Ù†Ø¯');
        }
        
        // ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        async function loadSensorData() {
            try {
                console.log('ğŸ“¥ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§...');
                
                // Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ù„ÙˆØ¯ÛŒÙ†Ú¯
                updateConnectionStatus('loading');
                
                const dataUrl = 'https://raw.githubusercontent.com/alefadham-droid/sensor-dashboard/main/data/sensor-data.json';
                
                // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² proxy Ø¨Ø±Ø§ÛŒ Ø­Ù„ CORS
                const data = await fetchWithCORSProxy(dataUrl);
                
                // Ø°Ø®ÛŒØ±Ù‡ Ø²Ù…Ø§Ù† Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ²
                lastSuccessfulFetch = Date.now();
                
                console.log(`âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ (${Array.isArray(data) ? data.length : 'N/A'} Ø±Ú©ÙˆØ±Ø¯)`);
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                processData(data);
                
                // Ø¢Ù¾Ø¯ÛŒØª ÙˆØ¶Ø¹ÛŒØª Ø¢Ù†Ù„Ø§ÛŒÙ†
                updateConnectionStatus('online');
                
                return true;
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§:', error);
                
                // Ø¢Ù¾Ø¯ÛŒØª ÙˆØ¶Ø¹ÛŒØª Ø¢ÙÙ„Ø§ÛŒÙ†
                updateConnectionStatus('offline');
                
                // Ø§ÙØ²Ø§ÛŒØ´ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù‚Ø·Ø¹ÛŒ
                if (isOnline) {
                    disconnectCount++;
                    isOnline = false;
                    updateDisconnectCount();
                }
                
                return false;
            }
        }
        
        // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        function processData(data) {
            if (!Array.isArray(data) || data.length === 0) {
                showNoData();
                return;
            }
            
            sensorData = data;
            
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… "Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ø¯Ù‡"
            document.getElementById('noData').style.display = 'none';
            
            // Ù…Ø±ØªØ¨ Ú©Ø±Ø¯Ù† Ø§Ø² Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ù‚Ø¯ÛŒÙ…
            sensorData.sort((a, b) => {
                const timeA = a.unix_time || a.timestamp || 0;
                const timeB = b.unix_time || b.timestamp || 0;
                return timeB - timeA;
            });
            
            // Ø¢Ù¾Ø¯ÛŒØª ØªÙ…Ø§Ù… Ø¨Ø®Ø´â€ŒÙ‡Ø§
            updateCurrentValues();
            updateAverages();
            updateChart();
            updateTable();
            updateStats();
            updateTimeInfo();
            
            // Ø¢Ù¾Ø¯ÛŒØª Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            document.getElementById('dataCount').textContent = sensorData.length;
            document.getElementById('totalRecords').textContent = `${sensorData.length} Ø±Ú©ÙˆØ±Ø¯`;
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ù…Ù‚Ø§Ø¯ÛŒØ± ÙØ¹Ù„ÛŒ
        function updateCurrentValues() {
            if (sensorData.length === 0) return;
            
            const latest = sensorData[0];
            
            // Ø¯Ù…Ø§
            if (latest.temperature !== undefined) {
                const temp = latest.temperature.toFixed(1);
                document.getElementById('currentTemp').textContent = temp;
                document.getElementById('currentTemp').style.color = getTemperatureColor(latest.temperature);
            }
            
            // Ø±Ø·ÙˆØ¨Øª
            if (latest.humidity !== undefined) {
                const hum = latest.humidity.toFixed(1);
                document.getElementById('currentHum').textContent = hum;
                document.getElementById('currentHum').style.color = getHumidityColor(latest.humidity);
            }
            
            // Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø§Ø¯Ù‡
            if (latest.timestamp) {
                document.getElementById('lastDataTime').textContent = latest.timestamp;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ min/max
            updateMinMaxValues();
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†â€ŒÙ‡Ø§
        function updateAverages() {
            if (sensorData.length === 0) return;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¯Ù…Ø§ (Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ 1 Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡)
            const oneHourAgo = Date.now() / 1000 - 3600;
            const recentTemps = sensorData
                .filter(d => d.unix_time > oneHourAgo && d.temperature)
                .map(d => d.temperature);
            
            if (recentTemps.length > 0) {
                const avgTemp = recentTemps.reduce((a, b) => a + b, 0) / recentTemps.length;
                document.getElementById('avgTemp').textContent = avgTemp.toFixed(1);
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø±Ø·ÙˆØ¨Øª
            const recentHums = sensorData
                .filter(d => d.unix_time > oneHourAgo && d.humidity)
                .map(d => d.humidity);
            
            if (recentHums.length > 0) {
                const avgHum = recentHums.reduce((a, b) => a + b, 0) / recentHums.length;
                document.getElementById('avgHumidity').textContent = `${avgHum.toFixed(1)}%`;
            }
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ù†Ù…ÙˆØ¯Ø§Ø±
        function updateChart() {
            if (sensorData.length < 2) {
                // Ø§Ú¯Ø± Ø¯Ø§Ø¯Ù‡ Ú©Ø§ÙÛŒ Ù†ÛŒØ³ØªØŒ Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ùˆ Ù¾Ø§Ú© Ú©Ù†
                if (sensorChart) {
                    sensorChart.destroy();
                    sensorChart = null;
                }
                return;
            }
            
            // ÙÙ‚Ø· 24 Ø¯Ø§Ø¯Ù‡ Ø¢Ø®Ø± (ÛŒØ§ Ú©Ù…ØªØ±)
            const chartData = sensorData.slice(0, 24).reverse();
            
            const labels = chartData.map(d => {
                if (d.timestamp) return d.timestamp;
                if (d.id) return `#${d.id}`;
                const date = new Date(d.unix_time * 1000);
                return date.toLocaleTimeString('fa-IR');
            });
            
            const temps = chartData.map(d => d.temperature || 0);
            const hums = chartData.map(d => d.humidity || 0);
            
            const ctx = document.getElementById('sensorChart').getContext('2d');
            
            if (!chartInitialized) {
                // Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÙˆØ¯Ø§Ø± Ø¬Ø¯ÛŒØ¯
                sensorChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Ø¯Ù…Ø§ (Â°C)',
                                data: temps,
                                borderColor: '#ff6b6b',
                                backgroundColor: 'rgba(255, 107, 107, 0.1)',
                                borderWidth: 3,
                                tension: 0.4,
                                fill: true,
                                pointRadius: 4,
                                pointHoverRadius: 7,
                                pointBackgroundColor: '#ff6b6b'
                            },
                            {
                                label: 'Ø±Ø·ÙˆØ¨Øª (%)',
                                data: hums,
                                borderColor: '#4d96ff',
                                backgroundColor: 'rgba(77, 150, 255, 0.1)',
                                borderWidth: 3,
                                tension: 0.4,
                                fill: true,
                                pointRadius: 4,
                                pointHoverRadius: 7,
                                pointBackgroundColor: '#4d96ff',
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                rtl: true,
                                labels: {
                                    font: {
                                        family: 'Vazir',
                                        size: 14
                                    },
                                    padding: 20
                                }
                            },
                            tooltip: {
                                rtl: true,
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleFont: {
                                    family: 'Vazir',
                                    size: 14
                                },
                                bodyFont: {
                                    family: 'Vazir',
                                    size: 13
                                },
                                padding: 12
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    font: {
                                        family: 'Vazir',
                                        size: 12
                                    },
                                    maxRotation: 45
                                },
                                grid: {
                                    color: 'rgba(0,0,0,0.05)'
                                }
                            },
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left',
                                title: {
                                    display: true,
                                    text: 'Ø¯Ù…Ø§ (Â°C)',
                                    font: {
                                        family: 'Vazir',
                                        size: 14
                                    }
                                },
                                ticks: {
                                    font: {
                                        family: 'Vazir'
                                    }
                                },
                                grid: {
                                    color: 'rgba(0,0,0,0.05)'
                                }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                title: {
                                    display: true,
                                    text: 'Ø±Ø·ÙˆØ¨Øª (%)',
                                    font: {
                                        family: 'Vazir',
                                        size: 14
                                    }
                                },
                                ticks: {
                                    font: {
                                        family: 'Vazir'
                                    }
                                },
                                grid: {
                                    drawOnChartArea: false
                                }
                            }
                        },
                        animation: {
                            duration: 1000,
                            easing: 'easeOutQuart'
                        }
                    }
                });
                
                chartInitialized = true;
                
            } else {
                // Ø¢Ù¾Ø¯ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø± Ù…ÙˆØ¬ÙˆØ¯
                sensorChart.data.labels = labels;
                sensorChart.data.datasets[0].data = temps;
                sensorChart.data.datasets[1].data = hums;
                sensorChart.update();
            }
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ø¬Ø¯ÙˆÙ„
        function updateTable() {
            const tbody = document.getElementById('dataTableBody');
            
            // ÙÙ‚Ø· 10 Ø¯Ø§Ø¯Ù‡ Ø¢Ø®Ø±
            const displayData = sensorData.slice(0, 10);
            
            let tableHTML = '';
            
            displayData.forEach((item, index) => {
                const temp = item.temperature || 0;
                const hum = item.humidity || 0;
                const timeAgo = calculateTimeAgo(item.unix_time);
                
                // ØªØ´Ø®ÛŒØµ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø±Ø¯ÛŒÙ
                const rowStatus = getRowStatus(item.unix_time);
                
                tableHTML += `
                    <tr>
                        <td>${item.id || index + 1}</td>
                        <td>${item.timestamp || '--:--:--'}</td>
                        <td>
                            <span class="badge" style="background: ${getTemperatureColor(temp)}">
                                ${temp.toFixed(1)}Â°C
                            </span>
                        </td>
                        <td>
                            <span class="badge" style="background: ${getHumidityColor(hum)}">
                                ${hum.toFixed(1)}%
                            </span>
                        </td>
                        <td>
                            <span class="badge bg-${rowStatus.color}">
                                <i class="bi bi-${rowStatus.icon}"></i>
                                ${rowStatus.text}
                            </span>
                        </td>
                        <td>${timeAgo}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = tableHTML;
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø±
        function updateStats() {
            if (sensorData.length === 0) return;
            
            // Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¯Ù…Ø§
            const temps = sensorData.map(d => d.temperature).filter(t => t != null);
            if (temps.length > 0) {
                const maxTemp = Math.max(...temps);
                const minTemp = Math.min(...temps);
                document.getElementById('tempRange').textContent = `${(maxTemp - minTemp).toFixed(1)}Â°C`;
            }
            
            // Ù†Ø±Ø® Ø¢Ù¾Ø¯ÛŒØª (Ø¯Ø§Ø¯Ù‡ Ø¯Ø± Ø³Ø§Ø¹Øª)
            if (sensorData.length > 1) {
                const firstTime = sensorData[sensorData.length - 1].unix_time;
                const lastTime = sensorData[0].unix_time;
                const hoursDiff = (lastTime - firstTime) / 3600;
                const ratePerHour = hoursDiff > 0 ? (sensorData.length / hoursDiff).toFixed(1) : sensorData.length;
                document.getElementById('updateRate').textContent = `${ratePerHour}/Ø³Ø§Ø¹Øª`;
            }
            
            // Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ
            if (sensorData.length > 1) {
                const first = sensorData[sensorData.length - 1];
                const last = sensorData[0];
                document.getElementById('timeRange').textContent = 
                    `${first.timestamp || 'Ø´Ø±ÙˆØ¹'} ØªØ§ ${last.timestamp || 'Ú©Ù†ÙˆÙ†'}`;
            }
            
            // Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ†
            if (lastSuccessfulFetch) {
                const onlineTime = Math.floor((Date.now() - lastSuccessfulFetch) / 1000);
                document.getElementById('onlineTime').textContent = formatDuration(onlineTime);
            }
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²Ù…Ø§Ù†ÛŒ
        function updateTimeInfo() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('fa-IR');
            const dateStr = now.toLocaleDateString('fa-IR');
            
            document.getElementById('lastUpdate').innerHTML = 
                `<i class="bi bi-clock"></i> ${timeStr} - ${dateStr}`;
            
            // Ø¢Ù¾Ø¯ÛŒØª Ø²Ù…Ø§Ù† Ú¯Ø°Ø´ØªÙ‡ Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø§Ø¯Ù‡
            if (sensorData.length > 0) {
                const lastDataTime = sensorData[0].unix_time;
                if (lastDataTime) {
                    const timeAgo = calculateTimeAgo(lastDataTime);
                    document.getElementById('timeAgo').textContent = `${timeAgo} Ù¾ÛŒØ´`;
                }
            }
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„
        function updateConnectionStatus(status) {
            const indicator = document.getElementById('statusIndicator');
            const statusElement = document.getElementById('connectionStatus');
            
            switch(status) {
                case 'online':
                    indicator.className = 'status-indicator status-online';
                    statusElement.className = 'connection-status connection-online';
                    statusElement.innerHTML = '<i class="bi bi-wifi"></i> Ø¢Ù†Ù„Ø§ÛŒÙ†';
                    isOnline = true;
                    break;
                    
                case 'offline':
                    indicator.className = 'status-indicator status-offline';
                    statusElement.className = 'connection-status connection-offline';
                    statusElement.innerHTML = '<i class="bi bi-wifi-off"></i> Ø¢ÙÙ„Ø§ÛŒÙ†';
                    isOnline = false;
                    break;
                    
                case 'loading':
                    indicator.className = 'status-indicator';
                    indicator.style.background = '#ffc107';
                    statusElement.className = 'connection-status';
                    statusElement.style.background = 'rgba(255, 193, 7, 0.2)';
                    statusElement.style.color = '#ffc107';
                    statusElement.style.borderColor = '#ffc107';
                    statusElement.innerHTML = '<i class="bi bi-arrow-repeat"></i> Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...';
                    break;
            }
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª min/max
        function updateMinMaxValues() {
            const temps = sensorData.map(d => d.temperature).filter(t => t != null);
            const hums = sensorData.map(d => d.humidity).filter(h => h != null);
            
            if (temps.length > 0) {
                document.getElementById('maxTemp').textContent = Math.max(...temps).toFixed(1);
                document.getElementById('minTemp').textContent = Math.min(...temps).toFixed(1);
            }
            
            if (hums.length > 0) {
                document.getElementById('maxHum').textContent = Math.max(...hums).toFixed(1);
                document.getElementById('minHum').textContent = Math.min(...hums).toFixed(1);
            }
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù‚Ø·Ø¹ÛŒ
        function updateDisconnectCount() {
            document.getElementById('disconnectCount').textContent = disconnectCount;
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… "Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ø¯Ù‡"
        function showNoData() {
            document.getElementById('noData').style.display = 'block';
            document.getElementById('dataTableBody').innerHTML = '';
            
            // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ù…Ù‚Ø§Ø¯ÛŒØ±
            document.getElementById('currentTemp').textContent = '--';
            document.getElementById('currentHum').textContent = '--';
            document.getElementById('avgTemp').textContent = '--';
            document.getElementById('dataCount').textContent = '0';
        }
        
        // ============ ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ============
        
        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù† Ú¯Ø°Ø´ØªÙ‡
        function calculateTimeAgo(unixTime) {
            if (!unixTime) return '--';
            
            const now = Math.floor(Date.now() / 1000);
            const diff = now - unixTime;
            
            if (diff < 60) {
                return `${diff} Ø«Ø§Ù†ÛŒÙ‡`;
            } else if (diff < 3600) {
                return `${Math.floor(diff / 60)} Ø¯Ù‚ÛŒÙ‚Ù‡`;
            } else if (diff < 86400) {
                return `${Math.floor(diff / 3600)} Ø³Ø§Ø¹Øª`;
            } else {
                return `${Math.floor(diff / 86400)} Ø±ÙˆØ²`;
            }
        }
        
        // ÙØ±Ù…Øª Ù…Ø¯Øª Ø²Ù…Ø§Ù†
        function formatDuration(seconds) {
            if (seconds < 60) {
                return `${seconds} Ø«Ø§Ù†ÛŒÙ‡`;
            } else if (seconds < 3600) {
                return `${Math.floor(seconds / 60)} Ø¯Ù‚ÛŒÙ‚Ù‡`;
            } else {
                return `${Math.floor(seconds / 3600)} Ø³Ø§Ø¹Øª`;
            }
        }
        
        // Ø±Ù†Ú¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ù…Ø§
        function getTemperatureColor(temp) {
            if (temp < 20) return '#4d96ff'; // Ø¢Ø¨ÛŒ (Ø³Ø±Ø¯)
            if (temp < 25) return '#38b000'; // Ø³Ø¨Ø² (Ù…ØªØ¹Ø§Ø¯Ù„)
            if (temp < 30) return '#ffa800'; // Ù†Ø§Ø±Ù†Ø¬ÛŒ (Ú¯Ø±Ù…)
            return '#ff6b6b'; // Ù‚Ø±Ù…Ø² (Ø®ÛŒÙ„ÛŒ Ú¯Ø±Ù…)
        }
        
        // Ø±Ù†Ú¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø±Ø·ÙˆØ¨Øª
        function getHumidityColor(hum) {
            if (hum < 30) return '#ffa800'; // Ù†Ø§Ø±Ù†Ø¬ÛŒ (Ø®Ø´Ú©)
            if (hum < 60) return '#38b000'; // Ø³Ø¨Ø² (Ù…ØªØ¹Ø§Ø¯Ù„)
            if (hum < 80) return '#4d96ff'; // Ø¢Ø¨ÛŒ (Ù…Ø±Ø·ÙˆØ¨)
            return '#7209b7'; // Ø¨Ù†ÙØ´ (Ø®ÛŒÙ„ÛŒ Ù…Ø±Ø·ÙˆØ¨)
        }
        
        // ÙˆØ¶Ø¹ÛŒØª Ù‡Ø± Ø±Ø¯ÛŒÙ Ø¯Ø± Ø¬Ø¯ÙˆÙ„
        function getRowStatus(unixTime) {
            if (!unixTime) return { color: 'secondary', icon: 'question-circle', text: 'Ù†Ø§Ù…Ø´Ø®Øµ' };
            
            const now = Math.floor(Date.now() / 1000);
            const diff = now - unixTime;
            
            if (diff < 300) { // 5 Ø¯Ù‚ÛŒÙ‚Ù‡
                return { color: 'success', icon: 'check-circle', text: 'Ø¢Ù†Ù„Ø§ÛŒÙ†' };
            } else if (diff < 1800) { // 30 Ø¯Ù‚ÛŒÙ‚Ù‡
                return { color: 'warning', icon: 'clock-history', text: 'Ù‚Ø¯ÛŒÙ…ÛŒ' };
            } else {
                return { color: 'danger', icon: 'exclamation-triangle', text: 'Ø¢ÙÙ„Ø§ÛŒÙ†' };
            }
        }
        
        // ØªØºÛŒÛŒØ± Ù†Ø±Ø® Ø±ÙØ±Ø´
        function changeRefreshRate(seconds) {
            refreshRate = seconds * 1000;
            
            // Ø¢Ù¾Ø¯ÛŒØª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„
            document.querySelectorAll('.btn-group .btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Ø±ÛŒØ³Øª interval
            if (document.getElementById('autoRefresh').checked) {
                startAutoRefresh();
            }
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
            showNotification(`Ù†Ø±Ø® Ø±ÙØ±Ø´ Ø¨Ù‡ ${seconds} Ø«Ø§Ù†ÛŒÙ‡ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯`);
        }
        
        // Ø´Ø±ÙˆØ¹ Auto-Refresh
        function startAutoRefresh() {
            if (refreshInterval) {
                clearInterval(refreshInterval);
            }
            
            refreshInterval = setInterval(() => {
                if (document.getElementById('autoRefresh').checked) {
                    loadSensorData();
                }
            }, refreshRate);
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
        function showNotification(message) {
            // Ø§ÛŒØ¬Ø§Ø¯ Ø¹Ù†ØµØ± Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
            const notification = document.createElement('div');
            notification.className = 'alert alert-custom alert-info position-fixed top-0 end-0 m-3';
            notification.style.zIndex = '9999';
            notification.innerHTML = `
                <i class="bi bi-info-circle me-2"></i>
                ${message}
                <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
            `;
            
            document.body.appendChild(notification);
            
            // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 3 Ø«Ø§Ù†ÛŒÙ‡
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }
        
        // ØªØºÛŒÛŒØ± Ø³Ø§ÛŒØ² Ø¬Ø¯ÙˆÙ„
        function toggleDataTable() {
            const table = document.querySelector('.data-table');
            if (table.style.maxHeight === '800px') {
                table.style.maxHeight = '400px';
                showNotification('Ø¬Ø¯ÙˆÙ„ Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¬Ù…Ø¹â€ŒØ´Ø¯Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª');
            } else {
                table.style.maxHeight = '800px';
                showNotification('Ø¬Ø¯ÙˆÙ„ Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¨Ø§Ø² ØªØºÛŒÛŒØ± Ú©Ø±Ø¯');
            }
        }
        
        // ============ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ ============
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ Ø³ÛŒØ³ØªÙ… Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø´Ø±ÙˆØ¹ Ø´Ø¯');
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
            loadSensorData();
            
            // Ø´Ø±ÙˆØ¹ Auto-Refresh
            startAutoRefresh();
            
            // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¯Ú©Ù…Ù‡ Ø±ÙØ±Ø´
            document.getElementById('refreshBtn').addEventListener('click', () => {
                loadSensorData();
                showNotification('Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø³ØªÛŒ...');
            });
            
            // Ø±ÙˆÛŒØ¯Ø§Ø¯ ØªØºÛŒÛŒØ± Auto-Refresh
            document.getElementById('autoRefresh').addEventListener('change', function() {
                if (this.checked) {
                    startAutoRefresh();
                    showNotification('Auto-Refresh ÙØ¹Ø§Ù„ Ø´Ø¯');
                } else {
                    clearInterval(refreshInterval);
                    refreshInterval = null;
                    showNotification('Auto-Refresh ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯');
                }
            });
            
            // Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø±
            document.addEventListener('keydown', (e) => {
                if (e.key === 'r' && e.ctrlKey) {
                    e.preventDefault();
                    loadSensorData();
                }
                if (e.key === 't' && e.ctrlKey) {
                    e.preventDefault();
                    document.getElementById('autoRefresh').click();
                }
            });
        });
        
        // Ø«Ø¨Øª ØªÙˆØ§Ø¨Ø¹ Ø¯Ø± scope Ø³Ø±Ø§Ø³Ø±ÛŒ
        window.changeRefreshRate = changeRefreshRate;
        window.toggleDataTable = toggleDataTable;
        
    </script>

    <!-- ÙÙˆÙ†Øª ÙØ§Ø±Ø³ÛŒ -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">
</body>
</html>
